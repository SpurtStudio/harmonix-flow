# Источники информации и документация по компонентам системы "Гармония"

## Общая архитектура

### Основные компоненты:
1. **Index.tsx** - Главная страница дашборда с визуализацией баланса жизни
2. **LifeBalanceRadar.tsx** - Компонент визуализации баланса жизни в виде радара
3. **db.ts** - База данных IndexedDB с таблицами для всех сущностей системы
4. **use-change-propagation.ts** - Хук для анализа влияния изменений в системе

### Структура базы данных (db.ts):
- Vision - Видение
- GlobalGoal - Глобальные цели
- StrategicGoal - Стратегические цели
- Project - Проекты
- Task - Задачи
- JournalEntry - Записи в дневнике
- Idea - Идеи
- Habit - Привычки
- HealthIndicator - Показатели здоровья
- Notification - Уведомления
- Hobby - Хобби
- FinancialGoal, FinancialTransaction, FinancialCategory - Финансовые данные
- FamilyMember, FamilyEvent, Relationship - Семейные данные

## Компоненты главной страницы (Index.tsx)

### Заглушки, которые нужно заменить:
1. **Данные о балансе жизни** - заменить на реальные данные из БД
2. **Состояние энергии** - реализовать отслеживание и отображение уровня энергии
3. **Система оперативных изменений** - интегрировать систему отслеживания изменений
4. **Интерактивная документация** - заменить заглушку на реальную интерактивную документацию

### Компоненты главной страницы:
- LifeBalanceRadar - визуализация баланса жизни
- ProgressOverview - обзор прогресса
- QuickActions - быстрые действия
- TodaysFocus - фокус дня
- UpcomingTasks - предстоящие задачи

## Компоненты здоровья

### HealthDashboard.tsx
- Основной компонент панели здоровья
- Содержит HealthIndicatorForm, HealthIndicatorsList, HealthHabitsList

### HealthIndicatorsList.tsx
- Отображение показателей здоровья
- Группировка по названию
- Возможность удаления показателей

## Система отслеживания изменений

### use-change-propagation.ts
- Хук для анализа влияния изменений в системе
- Содержит функции propagateChange и applyAdjustments
- Использует ИИ для анализа данных

## Документация

### Documentation.tsx
- Страница документации
- Загружает markdown файлы из /docs/
- Содержит навигацию и поиск по документации

## Пользовательские настройки

### UserPreferencesContext.tsx
- Контекст для хранения пользовательских настроек
- Содержит настройки режима новичка, настроения, экономии энергии и скрытия элементов тревожности

## Криптография

### crypto.ts
- Функции для шифрования/дешифрования данных
- Генерация и экспорт/импорт ключей
- Функции для работы с паролями и мастер-ключами

## Синхронизация

### sync.ts
- Функции для синхронизации данных с сервером
- Использует CRDT для слияния изменений
- Шифрует данные перед отправкой

## Векторная база данных

### vector-db.ts
- Векторная база данных для семантического поиска
- Использует hnswlib-wasm для индексации

## Whisper (распознавание речи)

### whisper.ts и whisper-wasm.ts
- Имитация интеграции с моделью Whisper для распознавания речи
- Содержат функции для загрузки моделей и распознавания аудио

## ИИ-инсайты

### useAIInsights.ts
- Хук для получения инсайтов от ИИ
- Анализирует данные о балансе жизни и задачах
## Изменения, внесенные в процессе разработки:

### Создан новый хук useLifeBalanceData.ts
- Расположение: src/hooks/useLifeBalanceData.ts
- Назначение: Получение реальных данных о балансе жизни из IndexedDB
- Функциональность:
  - Получает глобальные цели из БД
  - Вычисляет прогресс по сферам жизни
  - Рассчитывает средний баланс жизни
  - Возвращает данные в формате, совместимом с компонентом LifeBalanceRadar

### Создан новый компонент EnergyLevelIndicator.tsx
- Расположение: src/components/EnergyLevelIndicator.tsx
- Назначение: Отображение состояния энергии пользователя
- Функциональность:
  - Получает данные из записей дневника и привычек
  - Вычисляет уровень энергии на основе физического состояния из дневника
  - Отображает уровень энергии в виде прогресс-бара
  - Показывает основание для расчета уровня энергии

### Создан новый компонент ChangePropagationSystem.tsx
- Расположение: src/components/ChangePropagationSystem.tsx
- Назначение: Система оперативных изменений
- Функциональность:
  - Получает последние изменения из БД
  - Отображает последние изменения
  - Интегрирует хук useChangePropagation для анализа влияния изменений
  - Предоставляет кнопки для режима "Что-если" и истории корректировок

### Создан новый компонент InteractiveDocumentation.tsx
- Расположение: src/components/InteractiveDocumentation.tsx
- Назначение: Интерактивная документация
- Функциональность:
  - Отображает контекстную справку по различным разделам системы
  - Реализует навигацию по разделам документации
  - Интегрирует компонент HelpTooltip для отображения подсказок
  - Предоставляет ссылку на полное руководство

### Обновлен файл src/pages/Index.tsx
- Заменены все заглушки на реальные компоненты:
  - Данные о балансе жизни теперь получаются через хук useLifeBalanceData
  - Состояние энергии отображается через компонент EnergyLevelIndicator
  - Система оперативных изменений реализована через компонент ChangePropagationSystem
  - Интерактивная документация реализована через компонент InteractiveDocumentation
- Удалены все функции-заглушки и мок-данные
